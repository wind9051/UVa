### 🌏 **Language**
| zh [中文](md10958_zh.md) | en [English](md10958_en.md) | 
| [C++](UVa10958.cpp) |


<aside>

## **UVa 10958 - How Many Solutions?**

給定三個整數 m, n, p 的值，以下方程有多少整數解？$[ \frac{m}{x} + \frac{n}{y} = \frac{1}{p} ]$

---

### **輸入**

輸入文件包含最多 1001 組輸入。每組輸入在單行中給出，包含三個整數，分別表示 m, n 和 p 的值。 當 m, n 和 p 的值均為零時，輸入結束（-1000 ≤ m, n, p ≤ 1000）。

### **輸出**

對於每組輸入，輸出一行，包含輸出序號和一個整數 N，表示給定的 m, n 和 p 的值有多少解。

**註釋**

對於第一個範例輸入，對應的方程是： $[ \frac{1}{x} + \frac{2}{y} = \frac{1}{4} ]$ 對應的 11 個解是：

- (x, y) = (-28, -12)
- (x, y) = (-6, -4)
- (x, y) = (2, -8)
- (x, y) = (3, -24)
- (x, y) = (5, 40)
- (x, y) = (6, 24)
- (x, y) = (8, 16)
- (x, y) = (12, 12)
- (x, y) = (20, 10)
- (x, y) = (36, 9)

---

</aside>

### 解法
<aside>

> 
> **原始方程式**: $[ \frac{m}{x} + \frac{n}{y} = \frac{1}{p} ]$
> 
> **整理方程式**: $[ \frac{n}{y} = \frac{1}{p} - \frac{m}{x} ]$
> 
> **將右邊合併**: $[ \frac{n}{y} = \frac{x - pm}{px} ]$
> 
> **解出 y**: $[ y = \frac{pnx}{x - pm} ]$
>
>
>> **y 為整數條件：** 分母 ( x - pm ) 必須是 ( pnx ) 的因數。
> 
>**設k 為 ( x - pm )**: $[ k = x - pm ]$
> 
> **重新整理 y**: $[ y = pn + \frac{ppnm}{k} ]$
> 
> **整理方程式**: [ ppnm = (x - pm)(y - pn) ]
> 

 
> 1. 質數篩
> 2. 計算 `(ppnm)` 的因數數量
> 3. $(e1+1)×(e2+1)×...×(ek+1)$
    > 
>     > N = 36 = 2^2 × 3^2
>     因數數量 (2+1)×(2+1)=3×3=9 
>     9 個因數是：1,2,3,4,6,9,12,18,36
> 4. N 在迴圈結束後仍大於 1，說明它本身是質數
    > 
>     > N=37
>         ans <<= 1, {1, 37}
>     > 
> 5. **正負因數 numdiv * 2**
> 6. 排除 {0, 0} 再-1
> </aside>
