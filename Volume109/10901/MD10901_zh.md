### 🌏 **Language**
| zh [中文](MD10901_zh.md) | en [English](md10901_en.md) | 
| [C++](UVa10901.cpp) |


<aside>

## **UVa 10901 - Ferry Loading III**

在橋樑普及之前，渡輪被用來運送汽車穿越河流。河流渡輪與其較大的同類不同，它們在導向線上運行，並由河流的水流提供動力。汽車從渡輪的一端駛入，渡輪穿越河流，然後汽車從渡輪的另一端駛出。

有一艘渡輪可以在 t 分鐘內將 n 輛汽車運送到河的對岸，並在 t 分鐘內返回。

汽車可能會到達任一河岸，等待渡輪將其運送到對岸。只要渡輪載有汽車或任一河岸至少有一輛汽車在等待，渡輪就會在兩岸之間不斷往返。每當渡輪到達其中一個河岸時，它會卸下貨物並裝載最多 n 輛等待過河的汽車。如果有超過 n 輛汽車等待，則等待時間最長的汽車會被裝載。如果兩岸都沒有汽車等待，渡輪會等待直到有汽車到達，然後裝載它（如果它到達的是渡輪所在的同一岸），並穿越河流。每輛汽車在什麼時候到達河的另一邊？

---

### **輸入**

輸入的第一行包含 c，表示測試案例的數量。每個測試案例以 n、t、m 開始。接下來的 m 行，每行給出一輛汽車的到達時間（自一天開始以來的分鐘數），以及汽車到達的河岸（‘left’ 或 ‘right’）。

### **輸出**

對於每個測試案例，按輸入順序輸出每輛汽車在對岸卸載的時間。測試案例之間輸出一個空行。可以假設 0 < n, t, m ≤ 10000。每個測試案例的到達時間嚴格遞增。渡輪最初在左岸。裝載和卸載時間可以忽略不計。

---

<aside>

> [!TIP]
>
> 如果只有一岸有等待的汽車，渡輪會在該岸最早的汽車到達時間出發。
> 
> 如果兩岸都有等待的汽車，渡輪會在最早到達的汽車到達時間出發。
> 
> 渡輪的出發時間必須確保不會早於 `current_time`。

</aside>
