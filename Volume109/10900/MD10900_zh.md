### 🌏 **Language**
| zh [中文](MD10900_zh.md) | en [English](md10958_en.md) | 
| [C++](UVa10900.cpp) |


<aside>

## **UVa 10900 - So you want to be a 2n-aire?**

玩家從 $1 的獎金開始，並被問到一系列的 n 個問題。對於每個問題，他可以選擇：

1. 放棄並保留他的獎金。
2. 回答問題。如果回答錯誤，他將以空手而歸。如果回答正確，獎金將翻倍，並繼續回答下一個問題。 在最後一個問題之後，他將保留他的獎金。玩家希望最大化他的期望獎金。 每當被問到一個問題時，玩家能夠評估他回答正確的概率 p。對於每個問題，我們假設 p 是一個在範圍 t 到 1 之間均勻分佈的隨機變量。

---

### **輸入**

輸入是若干行，每行包含兩個數字：一個整數 1 ≤ n ≤ 30 和一個實數 0 ≤ t ≤ 1。輸入以一行 "0 0" 結束。這行不應被處理。

### **輸出**

對於每個輸入的 n 和 t，輸出玩家在採取最佳策略時的期望獎金。輸出應四捨五入到小數點后三位。

---

</aside>

### 解法

<aside>

`DP[i]` ：位於第 `i` 題時，玩家的最佳期望獎金

`DP[n]`：當玩家回答完 `n` 題後，他最高獲得 `2^n` 的獎金

---

玩家在第 `i` 題時：

**直接退出：**獎金 `2^i`

**嘗試回答**，回答正確，預期獎金變為 `DP[i+1]`，回答錯誤，則獎金歸零

$DP[i] = max(2^i, p*DP[i+1])$

**`p0` (決策點)**

機率 `p` 是均勻分佈在 `[t, 1]` 

機率 p≥p0 時，玩家選擇繼續答題。

機率 p<p0 時，玩家選擇退出

$p0 = \max(t, \frac{2^i}{DP[i+1]})$

**`p1` (答對期望值)**

 $p1 = \frac{p0 - t}{1 - t}$ lower_bound

p1 機率選擇退出

(1−p1) 機率選擇繼續答題。$\mathbb{E}[p | p < p_0] = \frac{1 + p_0}{2}$

$DP[i] = p_1 \cdot 2^i + (1 - p_1) \cdot \frac{1 + p_0}{2} \cdot DP[i+1]$

</aside>
